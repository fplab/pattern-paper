% !TEX root= pattern-paper.tex

\begin{figure}[ht]
  \judgbox{\ctruify{\xi_1} = \xi_2}{}

  \begin{align*}
    \ctruify{\cinj{C}{\tau}{\xi}} & = \cinj{C}{\tau}{\ctruify{\xi}}
  \end{align*}

  \judgbox{\cfalsify{\xi_1} = \xi_2}{}

  \begin{align*}
    \cfalsify{\cinj{C}{\tau}{\xi}} & = \cinj{C}{\tau}{\cfalsify{\xi}}
  \end{align*}

  \judgbox{\cincon{\Xi}}{}

  \begin{mathpar}
    \Infer{\CINCInjType}{
      \cinj{C'}{\tau'}{\xi'} \in \Xi \\
      \tau' \neq \tau
    }{
      \cincon{\Xi,\cinj{C}{\tau}{\xi}}
    }

    \Infer{\CINCInjTag}{
      \cinj{\tagC'}{\tau}{\xi'} \in \Xi \\
      \tagC \neq \tagC'
    }{
      \cincon{\Xi,\cinj{\tagC}{\tau}{\xi}}
    }

    \Infer{\CINCInjArg}{
      \cincon{\setof{\xi' | \cinj{C'}{\tau}{\xi'} \in \Xi \wedge (C' = C \vee \tagmaymatch{C'}{C})}, \xi}
    }{
      \cincon{\Xi,\cinj{C}{\tau}{\xi}}
    }

    \Infer{\CINCNotInj}{
      \cincon{\setof{\xi' \in \Xi | \xi' \neq \cinj{C'}{\tau'}{\xi''}}}
    }{
      \cincon{\Xi,\cinj{C}{\tau}{\xi}}
    }
  \end{mathpar}

  \caption{Decidability of labeled sums}
  \label{fig:labeled-sums-decidability}
\end{figure}
