\section{Decidability}

\judgboxa{\cincon{\Xi}}{A finite set of constraints, $\Xi$, is inconsistent}
\begin{subequations}
\begin{equation}
\inferrule[CINCTruth]{
  \cincon{\Xi}
}{
  \cincon{\Xi, \ctruth}
}
\end{equation}
\begin{equation}
\inferrule[CINCFalsity]{ }{
  \cincon{\Xi, \cfalsity}
}
\end{equation}
\begin{equation}
\inferrule[CINCNum]{
  n_1 \neq n_2
}{
  \cincon{\Xi, \cnum{n_1}, \cnum{n_2}}
}
\end{equation}
\begin{equation}
\inferrule[CINCNotNum]{ }{
  \cincon{\Xi, \cnum{n}, \cnotnum{n}}
}
\end{equation}
\begin{equation}
\inferrule[CINCAnd]{
  \cincon{\Xi, \xi_1, \xi_2}
}{
  \cincon{\Xi, \cand{\xi_1}{\xi_2}}
}
\end{equation}
\begin{equation}
\inferrule[CINCOr]{
  \cincon{\Xi, \xi_1} \\
  \cincon{\Xi, \xi_2}
}{
  \cincon{\Xi, \cor{\xi_1}{\xi_2}}
}
\end{equation}
\begin{equation}
\inferrule[CINCInj]{ }{
  \cincon{\Xi, \cinl{\xi_1}, \cinr{\xi_2}}
}
\end{equation}
\begin{equation}
\inferrule[CINCInl]{
  \cincon{\Xi}
}{
  \cincon{\cinl{\Xi}}
}
\end{equation}
\begin{equation}
\inferrule[CINCInr]{
  \cincon{\Xi}
}{
  \cincon{\cinr{\Xi}}
}
\end{equation}
\begin{equation}
\inferrule[CINCPairL]{
  \cincon{\Xi_1}
}{
  \cincon{\cpair{\Xi_1}{\Xi_2}}
}
\end{equation}
\begin{equation}
\inferrule[CINCPairR]{
  \cincon{\Xi_2}
}{
  \cincon{\cpair{\Xi_1}{\Xi_2}}
}
\end{equation}
\end{subequations}

\begin{lemma}[Decidability of Inconsistency]
  \label{lem:inconsistency-decidability}
  Suppose $\ctruify{\xi}=\xi$. It is decidable whether $\cincon{\xi}$.
\end{lemma}

\begin{lemma}[Inconsistency and Entailment of Constraint]
  \label{lem:inconsistency-and-entailment}
  Suppose that $\ctruify{\xi} = \xi$. Then $\cincon{\cdual{\xi}}$ iff $\csatisfy{\ctruth}{\xi}$
\end{lemma}

\begin{lemma}
  \label{lem:satisfy-truify}
  If $\csatisfy{e}{\xi}$ then $\csatisfy{e}{\ctruify{\xi}}$
\end{lemma}
\begin{proof}
  By rule induction over Rules (\ref{rules:Satisfy}), it is obvious to see that $\ctruify{\xi} = \xi$.
\end{proof}

\begin{lemma}
  \label{lem:maysat-satormay-truify}
  If $\cmaysatisfy{e}{\xi}$ then $\csatisfyormay{e}{\ctruify{\xi}}$.
\end{lemma}
\begin{proof}
  \begin{pfsteps*}
  \item $\cmaysatisfy{e}{\xi}$ \BY{assumption} \pflabel{maysat}
  \end{pfsteps*}
  By Rule Induction over Rules (\ref{rules:MaySatisfy}) on \pfref{maysat}.
  \begin{byCases}

  \savelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSUnknown})}]
      \begin{pfsteps*}
      \item $\xi = \cunknown$ \BY{assumption}
      \item $\csatisfy{e}{\ctruth}$ \BY{Rule (\ref{rule:CSTruth})} \pflabel{satisfyT}
      \item $\csatisfyormay{e}{\ctruth}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{satisfyT}} \pflabel{satormayT}
      \end{pfsteps*}
      
  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSNotVal})}]
    \begin{pfsteps*}
    \item $\isntVal{e}$ \BY{assumption} \pflabel{notval}
    \item $\refutable{\xi}$ \BY{assumption} \pflabel{rft}
    \end{pfsteps*}
    By \autoref{lem:notval-refutable} on \pfref{notval} and \pfref{rft} and case analysis on its conclusion.
    By rule induction over \rulesref{rules:xi-refutable}.
    \begin{byCases}
    \savelocalsteps{lem:maysat-satormay-truify-2}
    \item[\refutable{\ctruify{\xi}}]
      \begin{pfsteps*}
      \item $\refutable{\ctruify{\xi}}$ \BY{assumption} \pflabel{rft-truify}
      \item $\cmaysatisfy{e}{\ctruify{\xi}}$ \BY{\ruleref{rule:CMSNotVal} on \pfref{notval} and \pfref{rft-truify}} \pflabel{[notval]maysat}
      \item $\csatisfyormay{e}{\ctruify{\xi}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[notval]maysat}}
      \end{pfsteps*}
    \restorelocalsteps{lem:maysat-satormay-truify-2}
    \item[\csatisfy{e}{\ctruify{\xi}}]
      \begin{pfsteps*}
      \item $\csatisfy{e}{\ctruify{\xi}}$ \BY{assumption} \pflabel{[notval]satisfy}
      \item $\csatisfyormay{e}{\ctruth}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[notval]satisfy}}
      \end{pfsteps*}
    \end{byCases}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSAnd1})}]
    \begin{pfsteps*}
    \item $\xi = \cand{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and1]maysat1}
    \item $\csatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and1]satisfy2}
    \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[and1]maysat1}} \pflabel{[and1]satormay1}
    \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{Lemma \ref{lem:satisfy-truify} on \pfref{[and1]satisfy2}} \pflabel{[and1]satisfy-truify2}
    \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[and1]satisfy-truify2}} \pflabel{[and1]satormay2}
    \item $\csatisfyormay{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and1]satormay1} and \pfref{[and1]satormay2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSAnd2})}]
    \begin{pfsteps*}
    \item $\xi = \cand{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\csatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and2]satisfy1}
    \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and2]maysat2}
    \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{Lemma \ref{lem:satisfy-truify} on \pfref{[and2]satisfy1}} \pflabel{[and2]satisfy-truify1}
    \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[and2]satisfy-truify1}} \pflabel{[and2]satormay1}
    \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[and2]maysat2}} \pflabel{[and2]satormay2}
    \item $\csatisfyormay{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and2]satormay1} and \pfref{[and2]satormay2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSAnd3})}]
    \begin{pfsteps*}
    \item $\xi = \cand{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and3]maysat1}
    \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and3]maysat2}
    \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[and3]maysat1}} \pflabel{[and3]satormay1}
    \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[and3]maysat2}} \pflabel{[and3]satormay2}
    \item $\csatisfyormay{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and3]satormay1} and \pfref{[and3]satormay2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSOr1})}]
    \begin{pfsteps*}
    \item $\xi = \cor{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[or1]maysat1}
    \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[or1]maysat1}} \pflabel{[or1]satormayTruify1}
    \item $\csatisfyormay{e}{\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-or} on \pfref{[or1]satormayTruify1}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSOr2})}]
    \begin{pfsteps*}
    \item $\xi = \cor{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[or2]maysat2}
    \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[or2]maysat2}} \pflabel{[or2]satormayTruify2}
    \item $\csatisfyormay{e}{\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-or} on \pfref{[or2]satormayTruify2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSInl})}]
    \begin{pfsteps*}
    \item $e = \hinl{\tau_2}{e_1}$ \BY{assumption}
    \item $\xi = \cinl{\xi_1}$ \BY{assumption}
    \item $\cmaysatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[inl]maysat1}
    \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[inl]maysat1}} \pflabel{[inl]satormayTruify1}
    \item $\csatisfyormay{\hinl{\tau_2}{e_1}}{\cinl{\ctruify{\xi_1}}}$ \BY{Lemma \ref{lem:satormay-inl} on \pfref{[inl]satormayTruify1}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSInr})}]
    \begin{pfsteps*}
    \item $e = \hinr{\tau_1}{e_2}$ \BY{assumption}
    \item $\xi = \cinr{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[inr]maysat2}
    \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[inr]maysat2}} \pflabel{[inr]satormayTruify2}
    \item $\csatisfyormay{\hinr{\tau_1}{e_2}}{\cinr{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-inr} on \pfref{[inr]satormayTruify2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSPair1})}]
    \begin{pfsteps*}
    \item $e = \hpair{e_1}{e_2}$ \BY{assumption}
    \item $\xi = \cpair{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[pair1]maysat1}
    \item $\csatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[pair1]satisfy2}
    \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[pair1]maysat1}} \pflabel{[pair1]satormay1}
    \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{Lemma \ref{lem:satisfy-truify} on \pfref{[pair1]satisfy2}} \pflabel{[pair1]satisfy-truify2}
    \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[pair1]satisfy-truify2}} \pflabel{[pair1]satormay2}
    \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[pair1]satormay1} and \pfref{[pair1]satormay2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSPair2})}]
    \begin{pfsteps*}
    \item $e = \hpair{e_1}{e_2}$ \BY{assumption}
    \item $\xi = \cpair{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\csatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[pair2]satisfy1}
    \item $\cmaysatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[pair2]maysat2}
    \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{Lemma \ref{lem:satisfy-truify} on \pfref{[pair2]satisfy1}} \pflabel{[pair2]satisfy-truify1}
    \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[pair2]satisfy-truify1}} \pflabel{[pair2]satormay1}
    \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[pair2]maysat2}} \pflabel{[pair2]satormay2}
    \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[pair2]satormay1} and \pfref{[pair2]satormay2}}
    \end{pfsteps*}

  \restorelocalsteps{lem:maysat-satormay-truify-1}
  \item[\text{(\ref{rule:CMSPair3})}]
    \begin{pfsteps*}
    \item $e = \hpair{e_1}{e_2}$ \BY{assumption}
    \item $\xi = \cpair{\xi_1}{\xi_2}$ \BY{assumption}
    \item $\cmaysatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[Pair3]maysat1}
    \item $\cmaysatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[Pair3]maysat2}
    \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[Pair3]maysat1}} \pflabel{[Pair3]satormay1}
    \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[Pair3]maysat2}} \pflabel{[Pair3]satormay2}
    \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[Pair3]satormay1} and \pfref{[Pair3]satormay2}}
    \end{pfsteps*}

  \end{byCases}

  \resetpfcounter
\end{proof}

\begin{lemma}
  \label{lem:satormay-truify}
  $\csatisfyormay{e}{\xi}$ iff $\csatisfyormay{e}{\ctruify{\xi}}$
\end{lemma}
\begin{proof}
  \begin{enumerate}
    \item Sufficiency:
      \begin{pfsteps*}
      \item $\csatisfyormay{e}{\xi}$ \BY{assumption} \pflabel{satormay}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormay}
      \savelocalsteps{lem:satormay-truify-suff-1}
      \begin{byCases}

      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\xi}$ \BY{assumption} \pflabel{sat}
        \item $\csatisfy{e}{\ctruify{\xi}}$ \BY{Lemma \ref{lem:satisfy-truify} on \pfref{sat}} \pflabel{[sat]sat-truify}
        \item $\csatisfyormay{e}{\ctruify{\xi}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[sat]sat-truify}}
        \end{pfsteps*}

      \restorelocalsteps{lem:satormay-truify-suff-1}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{e}{\xi}$ \BY{assumption} \pflabel{maysat}
        \item $\csatisfyormay{e}{\ctruify{\xi}}$ \BY{Lemma \ref{lem:maysat-satormay-truify} on \pfref{maysat}}
        \end{pfsteps*}

      \end{byCases}

    \resetpfcounter

    \item Necessity:
    \begin{pfsteps*}
    \item $\csatisfyormay{e}{\ctruify{\xi}}$ \BY{assumption} \pflabel{satormayTruify}
    \end{pfsteps*}
    By structural induction on $\xi$,
    \begin{byCases}

    \savelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\ctruth, \cfalsity, \cnum{n}, \cnotnum{n}]
      \begin{pfsteps*}
      \item $\csatisfyormay{e}{\xi}$ \BY{\pfref{satormayTruify} and Definition \ref{defn:truify}}
      \end{pfsteps*}

    \restorelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\cunknown]
      \begin{pfsteps*}
      \item $\cmaysatisfy{e}{\cunknown}$ \BY{Rule (\ref{rule:CMSUnknown})} \pflabel{[unknown]maysatUnknown}
      \item $\csatisfyormay{e}{\cunknown}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[unknown]maysatUnknown}}
      \end{pfsteps*}
    
    \restorelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\cand{\xi_1}{\xi_2}]
      \begin{pfsteps*}
      \item $\ctruify{\xi} = \cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{Definition \ref{defn:truify}}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormayTruify},
      \savelocalsteps{lem:satormay-truify-necs-2}
      \begin{byCases}

      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{satisfyAndTruify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfyAndTruify} and only one case applies,
        \begin{byCases}
        \item[\text{(\ref{rule:CSAnd})}]
          \begin{pfsteps*}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[and]satisfyTruify1}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[and]satisfyTruify2}
          \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[and]satisfyTruify1}} \pflabel{[and]satormayTruify1}
          \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[and]satisfyTruify2}} \pflabel{[and]satormayTruify2}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[and]satormayTruify1}} \pflabel{[and]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[and]satormayTruify2}} \pflabel{[and]satormay2}
          \item $\csatisfyormay{e}{\cand{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and]satormay1} and \pfref{[and]satormay2}}
          \end{pfsteps*}
        \end{byCases}

      \restorelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{maysatAndTruify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:MaySatisfy}) on \pfref{maysatAndTruify} and three cases apply,
        \savelocalsteps{lem:satormay-truify-necs-3}
        \begin{byCases}

        \item[\text{(\ref{rule:CMSAnd1})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[and1]maysatTruify1}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[and1]satisfyTruify2}
          \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[and1]maysatTruify1}} \pflabel{[and1]satormayTruify1}
          \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[and1]satisfyTruify2}} \pflabel{[and1]satormayTruify2}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[and1]satormayTruify1}} \pflabel{[and1]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[and1]satormayTruify2}} \pflabel{[and1]satormay2}
          \item $\csatisfyormay{e}{\cand{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and1]satormay1} and \pfref{[and1]satormay2}}
          \end{pfsteps*}

        \restorelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSAnd2})}]
          \begin{pfsteps*}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[and2]satisfyTruify1}
          \item $\cmaysatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[and2]maysatTruify2}
          \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[and2]satisfyTruify1}} \pflabel{[and2]satormayTruify1}
          \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[and2]maysatTruify2}} \pflabel{[and2]satormayTruify2}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[and2]satormayTruify1}} \pflabel{[and2]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[and2]satormayTruify2}} \pflabel{[and2]satormay2}
          \item $\csatisfyormay{e}{\cand{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and2]satormay1} and \pfref{[and2]satormay2}}
          \end{pfsteps*}

        \restorelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSAnd3})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[and3]maysatTruify1}
          \item $\cmaysatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[and3]maysatTruify2}
          \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[and3]maysatTruify1}} \pflabel{[and3]satormayTruify1}
          \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[and3]maysatTruify2}} \pflabel{[and3]satormayTruify2}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[and3]satormayTruify1}} \pflabel{[and3]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[and3]satormayTruify2}} \pflabel{[and3]satormay2}
          \item $\csatisfyormay{e}{\cand{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-and} on \pfref{[and3]satormay1} and \pfref{[and3]satormay2}}
          \end{pfsteps*}
        \end{byCases}
      \end{byCases}

    \restorelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\cor{\xi_1}{\xi_2}]
      \begin{pfsteps*}
      \item $\ctruify{\cor{\xi_1}{\xi_2}} = \cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{Definition \ref{defn:truify}}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormayTruify},
      \savelocalsteps{lem:satormay-truify-necs-2}
      \begin{byCases}

      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{satisfyOrTruify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfyOrTruify} and two cases apply,
        \begin{byCases}

        \savelocalsteps{lem:satormay-truify-necs-3}
        \item[\text(\ref{rule:CSOr1})]
          \begin{pfsteps*}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[or1]satisfyTruify1}
          \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[or1]satisfyTruify1}} \pflabel{[or1]satormayTruify1}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[or1]satormayTruify1}} \pflabel{[or1]satormay1}
          \item $\csatisfyormay{e}{\cor{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-or} on \pfref{[or1]satormay1}}
          \end{pfsteps*}

        \restorelocalsteps{lem:satormay-truify-necs-3}
        \item[\text(\ref{rule:CSOr2})]
          \begin{pfsteps*}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[or2]satisfyTruify2}
          \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[or2]satisfyTruify2}} \pflabel{[or2]satormayTruify2}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[or2]satormayTruify2}} \pflabel{[or2]satormay2}
          \item $\csatisfyormay{e}{\cor{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-or} on \pfref{[or2]satormay2}}
          \end{pfsteps*}

        \end{byCases}

      \restorelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{e}{\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{maysatOrTruify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:MaySatisfy}) on \pfref{maysatOrTruify} and two cases apply,
        \begin{byCases}

        \savelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSOr1})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[or3]maysatTruify1}
          \item $\csatisfyormay{e}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[or3]maysatTruify1}} \pflabel{[or3]satormayTruify1}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[or3]satormayTruify1}} \pflabel{[or3]satormay1}
          \item $\csatisfyormay{e}{\cor{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-or} on \pfref{[or3]satormay1}}
          \end{pfsteps*}
          
        \restorelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSOr2})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[or4]maysatTruify2}
          \item $\csatisfyormay{e}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[or4]maysatTruify2}} \pflabel{[or4]satormayTruify2}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[or4]satormayTruify2}} \pflabel{[or4]satormay2}
          \item $\csatisfyormay{e}{\cor{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-or} on \pfref{[or4]satormay2}}
          \end{pfsteps*}
          
        \end{byCases}
      \end{byCases}

    \restorelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\cinl{\xi_1}]
      \begin{pfsteps*}
      \item $e = \hinl{\tau_2}{e_1}$ \BY{assumption}
      \item $\ctruify{\xi} = \cinl{\ctruify{\xi_1}}$ \BY{assumption}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormayTruify},
      \begin{byCases}

      \savelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{\hinl{\tau_2}{e_1}}{\cinl{\ctruify{\xi_1}}}$ \BY{assumption} \pflabel{satisfyInlTruify1}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) and only one case applies,
        \begin{byCases}
        \item[\text{(\ref{rule:CSInl})}]
          \begin{pfsteps*}
          \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{satisfyTruify1}
          \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{satisfyTruify1}} \pflabel{satormayTruify1}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{satormayTruify1}} \pflabel{satormay1}
          \item $\csatisfyormay{\hinl{\tau_2}{e_1}}{\cinl{\xi_1}}$ \BY{Lemma \ref{lem:satormay-inl} on \pfref{satormay1}}
          \end{pfsteps*}
        \end{byCases}

      \restorelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{\hinl{\tau_2}{e_1}}{\cinl{\ctruify{\xi_1}}}$ \BY{assumption} \pflabel{maysatInlTruify1}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:MaySatisfy}) and only one case applies,
        \begin{byCases}
        \item[\text{(\ref{rule:CMSInl})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{maysatTruify1}
          \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{maysatTruify1}} \pflabel{[may]satormayTruify1}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[may]satormayTruify1}} \pflabel{[may]satormay1}
          \item $\csatisfyormay{\hinl{\tau_2}{e_1}}{\cinl{\xi_1}}$ \BY{Lemma \ref{lem:satormay-inl} on \pfref{[may]satormay1}}
          \end{pfsteps*}
        \end{byCases}
      \end{byCases}

    \restorelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\cinr{\xi_2}]
      \begin{pfsteps*}
      \item $e = \hinr{\tau_1}{e_2}$ \BY{assumption}
      \item $\ctruify{\xi} = \cinr{\ctruify{\xi_2}}$ \BY{assumption}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormayTruify},
      \begin{byCases}

      \savelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{\hinr{\tau_1}{e_2}}{\cinr{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{satisfyInrTruify2}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) and only one case applies,
        \begin{byCases}
        \item[\text{(\ref{rule:CSInr})}]
          \begin{pfsteps*}
          \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{satisfyTruify2}
          \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{satisfyTruify2}} \pflabel{satormayTruify2}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{satormayTruify2}} \pflabel{satormay2}
          \item $\csatisfyormay{\hinr{\tau_1}{e_2}}{\cinr{\xi_2}}$ \BY{Lemma \ref{lem:satormay-inr} on \pfref{satormay2}}
          \end{pfsteps*}
        \end{byCases}

      \restorelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{\hinr{\tau_1}{e_2}}{\cinr{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{maysatInrTruify2}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:MaySatisfy}) and only one case applies,
        \begin{byCases}
        \item[\text{(\ref{rule:CMSInr})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{maysatTruify2}
          \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{maysatTruify2}} \pflabel{[may]satormayTruify2}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[may]satormayTruify2}} \pflabel{[may]satormay2}
          \item $\csatisfyormay{\hinr{\tau_1}{e_2}}{\cinr{\xi_2}}$ \BY{Lemma \ref{lem:satormay-inr} on \pfref{[may]satormay2}}
          \end{pfsteps*}
        \end{byCases}
      \end{byCases}

    \restorelocalsteps{lem:satormay-truify-necs-1}
    \item[\xi=\cpair{\xi_1}{\xi_2}]
      \begin{pfsteps*}
      \item $e = \hpair{e_1}{e_2}$ \BY{assumption}
      \item $\ctruify{\xi} = \cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{Definition \ref{defn:truify}}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormayTruify},
      \begin{byCases}

      \savelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{satisfyPairTruify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfyPairTruify} and only one case applies,
        \begin{byCases}
        \item[\text{(\ref{rule:CSPair})}]
          \begin{pfsteps*}
          \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[pair]satisfyTruify1}
          \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[pair]satisfyTruify2}
          \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[pair]satisfyTruify1}} \pflabel{[pair]satormayTruify1}
          \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[pair]satisfyTruify2}} \pflabel{[pair]satormayTruify2}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[pair]satormayTruify1}} \pflabel{[pair]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[pair]satormayTruify2}} \pflabel{[pair]satormay2}
          \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[pair]satormay1} and \pfref{[pair]satormay2}}
          \end{pfsteps*}
        \end{byCases}

      \restorelocalsteps{lem:satormay-truify-necs-2}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{assumption} \pflabel{maysatPairTruify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:MaySatisfy}) on \pfref{maysatPairTruify} and three cases apply,
        \begin{byCases}

        \savelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSPair1})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[pair1]maysatTruify1}
          \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[pair1]satisfyTruify2}
          \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[pair1]maysatTruify1}} \pflabel{[pair1]satormayTruify1}
          \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[pair1]satisfyTruify2}} \pflabel{[pair1]satormayTruify2}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[pair1]satormayTruify1}} \pflabel{[pair1]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[pair1]satormayTruify2}} \pflabel{[pair1]satormay2}
          \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[pair1]satormay1} and \pfref{[pair1]satormay2}}
          \end{pfsteps*}

        \restorelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSPair2})}]
          \begin{pfsteps*}
          \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[pair2]satisfyTruify1}
          \item $\cmaysatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[pair2]maysatTruify2}
          \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSSat}) on \pfref{[pair2]satisfyTruify1}} \pflabel{[pair2]satormayTruify1}
          \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[pair2]maysatTruify2}} \pflabel{[pair2]satormayTruify2}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[pair2]satormayTruify1}} \pflabel{[pair2]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[pair2]satormayTruify2}} \pflabel{[pair2]satormay2}
          \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[pair2]satormay1} and \pfref{[pair2]satormay2}}
          \end{pfsteps*}

        \restorelocalsteps{lem:satormay-truify-necs-3}
        \item[\text{(\ref{rule:CMSAnd3})}]
          \begin{pfsteps*}
          \item $\cmaysatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[pair3]maysatTruify1}
          \item $\cmaysatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[pair3]maysatTruify2}
          \item $\csatisfyormay{e_1}{\ctruify{\xi_1}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[pair3]maysatTruify1}} \pflabel{[pair3]satormayTruify1}
          \item $\csatisfyormay{e_2}{\ctruify{\xi_2}}$ \BY{Rule (\ref{rule:CSMSMay}) on \pfref{[pair3]maysatTruify2}} \pflabel{[pair3]satormayTruify2}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[pair3]satormayTruify1}} \pflabel{[pair3]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[pair3]satormayTruify2}} \pflabel{[pair3]satormay2}
          \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\xi_1}{\xi_2}}$ \BY{Lemma \ref{lem:satormay-pair} on \pfref{[pair3]satormay1} and \pfref{[pair3]satormay2}}
          \end{pfsteps*}
        \end{byCases}
      \end{byCases}

    \end{byCases}
      
    \resetpfcounter
  \end{enumerate}
\end{proof}

\begin{lemma}
\label{lem:truify-satormay-satisfy}
  Assume $\ctruify{\xi}=\xi$. Then $\csatisfyormay{\ctruth}{\xi}$ iff $\csatisfy{\ctruth}{\xi}$.
\end{lemma}
\begin{proof}
We prove sufficiency and necessity separately.
\begin{enumerate}
\item Sufficiency:
    
\item Necessity:
    
\end{enumerate}
\end{proof}

\begin{theorem}
\label{thrm:exhaustive-truify}
  $\csatisfyormay{\ctruth}{\xi}$ iff $\csatisfy{\ctruth}{\ctruify{\xi}}$.
\end{theorem}

\begin{lemma}
  \label{lem:val-satisfy-truify}
  Assume that $\isVal{e}$. Then $\csatisfyormay{e}{\xi}$ iff $\csatisfy{e}{\ctruify{\xi}}$
\end{lemma}
\begin{proof}
  \begin{pfsteps*}
  \item $\isVal{e}$ \BY{assumption} \pflabel{val}
  \end{pfsteps*}
  We prove sufficiency and necessity separately.
  \begin{enumerate}

    \savelocalsteps{0}
    \item Sufficiency:
      \begin{pfsteps*}
      \item $\csatisfyormay{e}{\xi}$ \BY{assumption} \pflabel{satormay}
      \end{pfsteps*}
      By rule induction over Rules (\ref{rules:satormay}) on \pfref{satormay}.
      \begin{byCases}

      \savelocalsteps{1}
      \item[\text{(\ref{rule:CSMSSat})}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\xi}$ \BY{assumption} \pflabel{satisfy}
        \item $\csatisfy{e}{\ctruify{\xi}}$ \BY{Lemma \ref{lem:satisfy-truify} on \pfref{satisfy}}
        \end{pfsteps*}
      
      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSMSMay})}]
        \begin{pfsteps*}
        \item $\cmaysatisfy{e}{\xi}$ \BY{assumption} \pflabel{maysat}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:MaySatisfy}) on \pfref{maysat}.
        \begin{byCases}

        \savelocalsteps{2}
        \item[\text{(\ref{rule:CMSUnknown})}]
          \begin{pfsteps*}
          \item $\xi=\cunknown$ \BY{assumption}
          \item $\csatisfy{e}{\ctruify{\xi}}$ \BY{Rule (\ref{rule:CSTruth}) and Definition \ref{defn:truify}}
          \end{pfsteps*}
          
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSNotVal})}] 
          \begin{pfsteps*}
          \item $\isntVal{e}$ \BY{assumption} \pflabel{notval}
          \end{pfsteps*}
          By rule induction over \rulesref{rules:notval} on \pfref{notval}, for each case,
          by rule induction over Rules (\ref{rules:Value}) on \pfref{val}, no case applies due to syntactic contradiction.
          
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSAnd1})}] 
          \begin{pfsteps*}
          \item $\xi=\cand{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and1]maysat1}
          \item $\csatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and1]satisfy2}
          \item $\ctruify{\xi}=\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[and1]maysat1}} \pflabel{[and1]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{\ruleref{rule:CSMSSat} on \pfref{[and1]satisfy2}} \pflabel{[and1]satormay2}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[and1]satormay1}} \pflabel{[and1]sat-truify1}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[and1]satormay2}} \pflabel{[and1]sat-truify2}
          \item $\csatisfy{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSAnd} on \pfref{[and1]sat-truify1} and \pfref{[and1]sat-truify2}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSAnd2})}] 
          \begin{pfsteps*}
          \item $\xi=\cand{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\csatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and2]satisfy1}
          \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and2]maysat2}
          \item $\ctruify{\xi}=\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{\ruleref{rule:CSMSSat} on \pfref{[and2]satisfy1}} \pflabel{[and2]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[and2]maysat2}} \pflabel{[and2]satormay2}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[and2]satormay1}} \pflabel{[and2]sat-truify1}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[and2]satormay2}} \pflabel{[and2]sat-truify2}
          \item $\csatisfy{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSAnd} on \pfref{[and2]sat-truify1} and \pfref{[and2]sat-truify2}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSAnd3})}] 
          \begin{pfsteps*}
          \item $\xi=\cand{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and3]maysat1}
          \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and3]maysat2}
          \item $\ctruify{\xi}=\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[and3]maysat1}} \pflabel{[and3]satormay1}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[and3]maysat2}} \pflabel{[and3]satormay2}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[and3]satormay1}} \pflabel{[and3]sat-truify1}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[and3]satormay2}} \pflabel{[and3]sat-truify2}
          \item $\csatisfy{e}{\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSAnd} on \pfref{[and3]sat-truify1} and \pfref{[and3]sat-truify2}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSOr1})}] 
          \begin{pfsteps*}
          \item $\xi=\cor{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[or1]maysat}
          \item $\ctruify{\xi}=\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[or1]maysat}} \pflabel{[or1]satormay}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[or1]satormay}} \pflabel{[or1]sat-truify}
          \item $\csatisfy{e}{\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSOr1} on \pfref{[or1]sat-truify}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSOr2})}] 
          \begin{pfsteps*}
          \item $\xi=\cor{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[or2]maysat}
          \item $\ctruify{\xi}=\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[or2]maysat}} \pflabel{[or2]satormay}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[or2]satormay}} \pflabel{[or2]sat-truify}
          \item $\csatisfy{e}{\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSOr2} on \pfref{[or2]sat-truify}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSInl})}] 
          \begin{pfsteps*}
          \item $\xi=\cinl{\xi_1}$ \BY{assumption}
          \item $\cmaysatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[inl1]maysat}
          \item $\ctruify{\xi}=\cinl{\ctruify{\xi_1}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_1}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[inl1]maysat}} \pflabel{[inl1]satormay}
          \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[inl1]satormay}} \pflabel{[inl1]sat-truify}
          \item $\csatisfy{e}{\cinl{\ctruify{\xi_1}}}$ \BY{\ruleref{rule:CSInl} on \pfref{[inl1]sat-truify}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSInr})}] 
          \begin{pfsteps*}
          \item $\xi=\cinr{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[inr]maysat}
          \item $\ctruify{\xi}=\cinr{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e}{\xi_2}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[inr]maysat}} \pflabel{[inr]satormay}
          \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[inr]satormay}} \pflabel{[inr]sat-truify}
          \item $\csatisfy{e}{\cinr{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSInr} on \pfref{[inr]sat-truify}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSPair1})}] 
          \begin{pfsteps*}
          \item $e=\hpair{e_1}{e_2}$ \BY{assumption}
          \item $\xi=\cpair{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[pair1]maysat1}
          \item $\csatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[pair1]satisfy2}
          \item $\ctruify{\xi}=\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[pair1]maysat1}} \pflabel{[pair1]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{\ruleref{rule:CSMSSat} on \pfref{[pair1]satisfy2}} \pflabel{[pair1]satormay2}
          \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[pair1]satormay1}} \pflabel{[pair1]sat-truify1}
          \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[pair1]satormay2}} \pflabel{[pair1]sat-truify2}
          \item $\csatisfy{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSPair} on \pfref{[pair1]sat-truify1} and \pfref{[pair1]sat-truify2}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSPair2})}] 
          \begin{pfsteps*}
          \item $e=\hpair{e_1}{e_2}$ \BY{assumption}
          \item $\xi=\cpair{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\csatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[pair2]satisfy1}
          \item $\cmaysatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[pair2]maysat2}
          \item $\ctruify{\xi}=\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{\ruleref{rule:CSMSSat} on \pfref{[pair2]satisfy1}} \pflabel{[pair2]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[pair2]maysat2}} \pflabel{[pair2]satormay2}
          \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[pair2]satormay1}} \pflabel{[pair2]sat-truify1}
          \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[pair2]satormay2}} \pflabel{[pair2]sat-truify2}
          \item $\csatisfy{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSPair} on \pfref{[pair2]sat-truify1} and \pfref{[pair2]sat-truify2}}
          \end{pfsteps*}
        
        \restorelocalsteps{2} 
        \item[\text{(\ref{rule:CMSPair3})}] 
          \begin{pfsteps*}
          \item $e=\hpair{e_1}{e_2}$ \BY{assumption}
          \item $\xi=\cpair{\xi_1}{\xi_2}$ \BY{assumption}
          \item $\cmaysatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[pair3]maysat1}
          \item $\cmaysatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[pair3]maysat2}
          \item $\ctruify{\xi}=\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
          \item $\csatisfyormay{e_1}{\xi_1}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[pair3]maysat1}} \pflabel{[pair3]satormay1}
          \item $\csatisfyormay{e_2}{\xi_2}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[pair3]maysat2}} \pflabel{[pair3]satormay2}
          \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{IH on \pfref{[pair3]satormay1}} \pflabel{[pair3]sat-truify1}
          \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{IH on \pfref{[pair3]satormay2}} \pflabel{[pair3]sat-truify2}
          \item $\csatisfy{\hpair{e_1}{e_2}}{\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}}$ \BY{\ruleref{rule:CSPair} on \pfref{[pair3]sat-truify1} and \pfref{[pair3]sat-truify2}}
          \end{pfsteps*}
        
        \end{byCases}
      \end{byCases}
    \restorelocalsteps{0}
    \item Necessity:
    \begin{pfsteps*}
    \item $\csatisfy{e}{\ctruify{\xi}}$ \BY{assumption} \pflabel{satisfy-truify}
    \end{pfsteps*}
    By structural induction on $\xi$.
    \begin{byCases}

      \savelocalsteps{1}
      \item[\xi=\ctruth, \cfalsity, \cnum{n}, \cnotnum{n}]
        \begin{pfsteps*}
        \item $\xi=\ctruify{\xi}$ \BY{\autoref{defn:truify}}
        \item $\csatisfyormay{e}{\xi}$ \BY{\ruleref{rule:CSMSSat} on \pfref{satisfy-truify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\xi=\cunknown]
        \begin{pfsteps*}
        \item $\cmaysatisfy{e}{\cunknown}$ \BY{\ruleref{rule:CMSUnknown}} \pflabel{[unknown]maysat}
        \item $\csatisfyormay{e}{\cunknown}$ \BY{\ruleref{rule:CSMSMay} on \pfref{[unknown]maysat}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\xi=\cand{\xi_1}{\xi_2}]
        \begin{pfsteps*}
        \item $\ctruify{\xi}=\cand{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-truify}, only one case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSAnd})}]
            \begin{pfsteps*}
            \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[and]satisfy-falsify1}
            \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[and]satisfy-falsify2}
            \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[and]satisfy-falsify1}} \pflabel{[and]satisfy1}
            \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[and]satisfy-falsify2}} \pflabel{[and]satisfy2}
            \item $\csatisfy{e}{\cand{\xi_1}{\xi_2}}$ \BY{\autoref{lem:satormay-and} on \pfref{[and]satisfy1} and \pfref{[and]satisfy2}}
            \end{pfsteps*}
        \end{byCases}

      \restorelocalsteps{1}
      \item[\xi = \cor{\xi_1}{\xi_2}]
        \begin{pfsteps*}
        \item $\ctruify{\xi}=\cor{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-truify} and only two cases apply.
        \begin{byCases}

          \savelocalsteps{2}
          \item[\text{(\ref{rule:CSOr1})}]
            \begin{pfsteps*}
            \item $\csatisfy{e}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[or]satisfy-falsify1}
            \item $\csatisfyormay{e}{\xi_1}$ \BY{IH on \pfref{[or]satisfy-falsify1}} \pflabel{[or]satisfy1}
            \item $\csatisfyormay{e}{\cor{\xi_1}{\xi_2}}$ \BY{\autoref{lem:satormay-or} on \pfref{[or]satisfy1}}
            \end{pfsteps*}

          \restorelocalsteps{2}
          \item[\text{(\ref{rule:CSOr2})}]
            \begin{pfsteps*}
            \item $\csatisfy{e}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[or]satisfy-falsify2}
            \item $\csatisfyormay{e}{\xi_2}$ \BY{IH on \pfref{[or]satisfy-falsify2}} \pflabel{[or]satisfy2}
            \item $\csatisfyormay{e}{\cor{\xi_1}{\xi_2}}$ \BY{\autoref{lem:satormay-or} on \pfref{[or]satisfy2}}
            \end{pfsteps*}
        \end{byCases}
      
      \restorelocalsteps{1}
      \item[\xi=\cinl{\xi_1}]
        \begin{pfsteps*}
        \item $\ctruify{\xi}=\cinl{\ctruify{\xi_1}}$ \BY{\autoref{defn:truify}}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-truify} and only one case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSInl})}]
            \begin{pfsteps*}
            \item $e = \hinl{\tau_2}{e_1}$ \BY{assumption}
            \item $\csatisfy{e_1}{\ctruify{\xi_1}}$ \BY{assumption} \pflabel{[inl]satisfy-falsify1}
            \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[inl]satisfy-falsify1}} \pflabel{[inl]satisfy1}
            \item $\csatisfyormay{\hinl{\tau_2}{e_1}}{\cinl{\xi_1}}$ \BY{\autoref{lem:satormay-inl} on \pfref{[inl]satisfy1}}
            \end{pfsteps*} 
        \end{byCases}

      \restorelocalsteps{1}
      \item[\xi=\cinr{\xi_2}]
        \begin{pfsteps*}
        \item $\ctruify{\xi}=\cinr{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-truify} and only one case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSInr})}]
            \begin{pfsteps*}
            \item $e = \hinr{\tau_1}{e_2}$ \BY{assumption}
            \item $\csatisfy{e_2}{\ctruify{\xi_2}}$ \BY{assumption} \pflabel{[inr]satisfy-falsify2}
            \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[inr]satisfy-falsify2}} \pflabel{[inr]satisfy2}
            \item $\csatisfyormay{\hinr{\tau_1}{e_2}}{\cinr{\xi_2}}$ \BY{\autoref{lem:satormay-inr} on \pfref{[inr]satisfy2}}
            \end{pfsteps*} 
        \end{byCases}
      
      \restorelocalsteps{1}
      \item[\xi=\cpair{\xi_1}{\xi_2}]
        \begin{pfsteps*}
        \item $\ctruify{\xi}=\cpair{\ctruify{\xi_1}}{\ctruify{\xi_2}}$ \BY{\autoref{defn:truify}}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-truify} and only one case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSPair})}]
            \begin{pfsteps*}
            \item $e=\hpair{e_1}{e_2}$ \BY{assumption}
            \item $\csatisfy{e_1}{\cfalsify{\xi_1}}$ \BY{assumption} \pflabel{[pair]satisfy-falsify1}
            \item $\csatisfy{e_2}{\cfalsify{\xi_2}}$ \BY{assumption} \pflabel{[pair]satisfy-falsify2}
            \item $\csatisfyormay{e_1}{\xi_1}$ \BY{IH on \pfref{[pair]satisfy-falsify1}} \pflabel{[pair]satisfy1}
            \item $\csatisfyormay{e_2}{\xi_2}$ \BY{IH on \pfref{[pair]satisfy-falsify2}} \pflabel{[pair]satisfy2}
            \item $\csatisfyormay{\hpair{e_1}{e_2}}{\cpair{\xi_1}{\xi_2}}$ \BY{\autoref{lem:satormay-pair} on \pfref{[pair]satisfy1} and \pfref{[pair]satisfy2}}
            \end{pfsteps*}
        \end{byCases}
    \end{byCases}
  \end{enumerate}
  \resetpfcounter
\end{proof}

\begin{lemma}
  \label{lem:satisfy-falsify}
  $\csatisfy{e}{\xi}$ iff $\csatisfy{e}{\cfalsify{\xi}}$
\end{lemma}
\begin{proof}
  We prove sufficiency and necessity separately.
  \begin{enumerate}
    \item Sufficiency:
    \begin{pfsteps*}
    \item $\csatisfy{e}{\xi}$ \BY{assumption} \pflabel{satisfy}
    \end{pfsteps*}
    By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy}.
    \begin{byCases}
      
      \savelocalsteps{1}
      \item[\text{(\ref{rule:CSTruth})}]
        \begin{pfsteps*}
        \item $\xi = \ctruth$ \BY{assumption}
        \item $\csatisfy{e}{\cfalsify{\ctruth}}$ \BY{\pfref{satisfy} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSNum})}]
        \begin{pfsteps*}
        \item $\xi = \cnum{n}$ \BY{assumption}
        \item $\csatisfy{e}{\cfalsify{\cnum{n}}}$ \BY{\pfref{satisfy} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSNotNum})}]
        \begin{pfsteps*}
        \item $\xi = \cnotnum{n}$ \BY{assumption}
        \item $\csatisfy{e}{\cfalsify{\cnotnum{n}}}$ \BY{\pfref{satisfy} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSAnd})}]
        \begin{pfsteps*}
        \item $\xi = \cand{\xi_1}{\xi_2}$ \BY{assumption}
        \item $\csatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[and]satisfy1}
        \item $\csatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[and]satisfy2}
        \item $\csatisfy{e}{\cfalsify{\xi_1}}$ \BY{IH on \pfref{[and]satisfy1}} \pflabel{[and]satisfy-falsify1}
        \item $\csatisfy{e}{\cfalsify{\xi_2}}$ \BY{IH on \pfref{[and]satisfy2}} \pflabel{[and]satisfy-falsify2}
        \item $\csatisfy{e}{\cand{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{Rule (\ref{rule:CSAnd}) on \pfref{[and]satisfy-falsify1} and \pfref{[and]satisfy-falsify2}} \pflabel{[and]satisfy-and-falsify}
        \item $\csatisfy{e}{\cfalsify{\cand{\xi_1}{\xi_2}}}$ \BY{\pfref{[and]satisfy-and-falsify} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSOr1})}]
        \begin{pfsteps*}
        \item $\xi = \cor{\xi_1}{\xi_2}$ \BY{assumption}
        \item $\csatisfy{e}{\xi_1}$ \BY{assumption} \pflabel{[or]satisfy1}
        \item $\csatisfy{e}{\cfalsify{\xi_1}}$ \BY{IH on \pfref{[or]satisfy1}} \pflabel{[or]satisfy-falsify1}
        \item $\csatisfy{e}{\cor{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{Rule (\ref{rule:CSOr1}) on \pfref{[or]satisfy-falsify1}} \pflabel{[or]satisfy-or-falsify}
        \item $\csatisfy{e}{\cfalsify{\cor{\xi_1}{\xi_2}}}$ \BY{\pfref{[or]satisfy-or-falsify} and Definition \ref{defn:falsify}}
        \end{pfsteps*}
      
      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSOr2})}]
        \begin{pfsteps*}
        \item $\xi = \cor{\xi_1}{\xi_2}$ \BY{assumption}
        \item $\csatisfy{e}{\xi_2}$ \BY{assumption} \pflabel{[or]satisfy2}
        \item $\csatisfy{e}{\cfalsify{\xi_2}}$ \BY{IH on \pfref{[or]satisfy2}} \pflabel{[or]satisfy-falsify2}
        \item $\csatisfy{e}{\cor{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{Rule (\ref{rule:CSOr2}) on \pfref{[or]satisfy-falsify2}} \pflabel{[or]satisfy-or-falsify'}
        \item $\csatisfy{e}{\cfalsify{\cor{\xi_1}{\xi_2}}}$ \BY{\pfref{[or]satisfy-or-falsify'} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSInl})}]
        \begin{pfsteps*}
        \item $e = \hinl{\tau_2}{e_1}$ \BY{assumption}
        \item $\xi = \cinl{\xi_1}$ \BY{assumption}
        \item $\csatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[inl]satisfy1}
        \item $\csatisfy{e_1}{\cfalsify{\xi_1}}$ \BY{IH on \pfref{[inl]satisfy1}} \pflabel{[inl]satisfy-falsify1}
        \item $\csatisfy{\hinl{\tau_2}{e_1}}{\cinl{\cfalsify{\xi_1}}}$ \BY{Rule (\ref{rule:CSInl}) on \pfref{[inl]satisfy-falsify1}} \pflabel{[inl]satisfy-inl-falsify}
        \item $\csatisfy{\hinl{\tau_2}{e_1}}{\cfalsify{\cinl{\xi_1}}}$ \BY{\pfref{[inl]satisfy-inl-falsify} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSInr})}]
        \begin{pfsteps*}
        \item $e = \hinr{\tau_1}{e_2}$ \BY{assumption}
        \item $\xi = \cinr{\xi_2}$ \BY{assumption}
        \item $\csatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[inr]satisfy2}
        \item $\csatisfy{e_2}{\cfalsify{\xi_2}}$ \BY{IH on \pfref{[inr]satisfy2}} \pflabel{[inr]satisfy-falsify2}
        \item $\csatisfy{\hinr{\tau_1}{e_2}}{\cinr{\cfalsify{\xi_2}}}$ \BY{Rule (\ref{rule:CSInr}) on \pfref{[inr]satisfy-falsify2}} \pflabel{[inr]satisfy-inr-falsify}
        \item $\csatisfy{\hinr{\tau_1}{e_2}}{\cfalsify{\cinr{\xi_2}}}$ \BY{\pfref{[inr]satisfy-inr-falsify} and Definition \ref{defn:falsify}}
        \end{pfsteps*}
      
      \restorelocalsteps{1}
      \item[\text{(\ref{rule:CSPair})}]
        \begin{pfsteps*}
        \item $e = \hpair{e_1}{e_2}$ \BY{assumption}
        \item $\xi = \cpair{\xi_1}{\xi_2}$ \BY{assumption}
        \item $\csatisfy{e_1}{\xi_1}$ \BY{assumption} \pflabel{[pair]satisfy1}
        \item $\csatisfy{e_2}{\xi_2}$ \BY{assumption} \pflabel{[pair]satisfy2}
        \item $\csatisfy{e_1}{\cfalsify{\xi_1}}$ \BY{IH on \pfref{[pair]satisfy1}} \pflabel{[pair]satisfy-falsify1}
        \item $\csatisfy{e_2}{\cfalsify{\xi_2}}$ \BY{IH on \pfref{[pair]satisfy2}} \pflabel{[pair]satisfy-falsify2}
        \item $\csatisfy{\hpair{e_1}{e_2}}{\cpair{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{Rule (\ref{rule:CSPair}) on \pfref{[pair]satisfy-falsify1} and \pfref{[pair]satisfy-falsify2}} \pflabel{[pair]satisfy-pair-falsify}
        \item $\csatisfy{\hpair{e_1}{e_2}}{\cfalsify{\cpair{\xi_1}{\xi_2}}}$ \BY{\pfref{[pair]satisfy-pair-falsify} and Definition \ref{defn:falsify}}
        \end{pfsteps*}
    \end{byCases}

    \resetpfcounter

    \item Necessity:
    \begin{pfsteps*}
    \item $\csatisfy{e}{\cfalsify{\xi}}$ \BY{assumption} \pflabel{satisfy-falsify}
    \end{pfsteps*}
    By structural induction on $\xi$.
    \begin{byCases}

      \savelocalsteps{1}
      \item[\xi=\ctruth, \cfalsity, \cnum{n}, \cnotnum{n}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\xi}$ \BY{\pfref{satisfy-falsify} and Definition \ref{defn:falsify}}
        \end{pfsteps*}

      \restorelocalsteps{1}
      \item[\xi=\cunknown]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cfalsity}$ \BY{\pfref{satisfy-falsify} and Definition \ref{defn:falsify}} \pflabel{satisfy-falsity}
        \item $\cnotsatisfy{e}{\cfalsity}$ \BY{Lemma \ref{lem:no-e-satisfy-falsity}} \pflabel{no-satisfy-falsity}
        \end{pfsteps*}
        \pfref{no-satisfy-falsity} contradicts \pfref{satisfy-falsity}.

      \restorelocalsteps{1}
      \item[\xi=\cand{\xi_1}{\xi_2}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cand{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{\pfref{satisfy-falsify} and Definition \ref{defn:falsify}} \pflabel{satisfy-and-falsify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-and-falsify} and only case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSAnd})}]
            \begin{pfsteps*}
            \item $\csatisfy{e}{\cfalsify{\xi_1}}$ \BY{assumption} \pflabel{[and]satisfy-falsify1}
            \item $\csatisfy{e}{\cfalsify{\xi_2}}$ \BY{assumption} \pflabel{[and]satisfy-falsify2}
            \item $\csatisfy{e}{\xi_1}$ \BY{IH on \pfref{[and]satisfy-falsify1}} \pflabel{[and]satisfy1}
            \item $\csatisfy{e}{\xi_2}$ \BY{IH on \pfref{[and]satisfy-falsify2}} \pflabel{[and]satisfy2}
            \item $\csatisfy{e}{\cand{\xi_1}{\xi_2}}$ \BY{Rule (\ref{rule:CSAnd}) on \pfref{[and]satisfy1} and \pfref{[and]satisfy2}}
            \end{pfsteps*}
        \end{byCases}

      \restorelocalsteps{1}
      \item[\xi = \cor{\xi_1}{\xi_2}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cor{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{\pfref{satisfy-falsify} and Definition \ref{defn:falsify}} \pflabel{satisfy-or-falsify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-or-falsify} and only two cases apply.
        \begin{byCases}

          \savelocalsteps{2}
          \item[\text{(\ref{rule:CSOr1})}]
            \begin{pfsteps*}
            \item $\csatisfy{e}{\cfalsify{\xi_1}}$ \BY{assumption} \pflabel{[or]satisfy-falsify1}
            \item $\csatisfy{e}{\xi_1}$ \BY{IH on \pfref{[or]satisfy-falsify1}} \pflabel{[or]satisfy1}
            \item $\csatisfy{e}{\cor{\xi_1}{\xi_2}}$ \BY{Rule (\ref{rule:CSOr1}) on \pfref{[or]satisfy1}}
            \end{pfsteps*}

          \restorelocalsteps{2}
          \item[\text{(\ref{rule:CSOr2})}]
            \begin{pfsteps*}
            \item $\csatisfy{e}{\cfalsify{\xi_2}}$ \BY{assumption} \pflabel{[or]satisfy-falsify2}
            \item $\csatisfy{e}{\xi_2}$ \BY{IH on \pfref{[or]satisfy-falsify2}} \pflabel{[or]satisfy2}
            \item $\csatisfy{e}{\cor{\xi_1}{\xi_2}}$ \BY{Rule (\ref{rule:CSOr2}) on \pfref{[or]satisfy2}}
            \end{pfsteps*}
        \end{byCases}
      
      \restorelocalsteps{1}
      \item[\xi=\cinl{\xi_1}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cinl{\cfalsify{\xi_1}}}$ \BY{\pfref{satisfy-falsify} and Definition \ref{defn:falsify}} \pflabel{satisfy-inl-falsify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-inl-falsify} and only one case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSInl})}]
            \begin{pfsteps*}
            \item $e = \hinl{\tau_2}{e_1}$ \BY{assumption}
            \item $\csatisfy{e_1}{\cfalsify{\xi_1}}$ \BY{assumption} \pflabel{[inl]satisfy-falsify1}
            \item $\csatisfy{e_1}{\xi_1}$ \BY{IH on \pfref{[inl]satisfy-falsify1}} \pflabel{[inl]satisfy1}
            \item $\csatisfy{e}{\cinl{\xi_1}}$ \BY{Rule (\ref{rule:CSInl}) on \pfref{[inl]satisfy1}}
            \end{pfsteps*} 
        \end{byCases}

      \restorelocalsteps{1}
      \item[\xi=\cinr{\xi_2}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cinr{\cfalsify{\xi_2}}}$ \BY        {\pfref{satisfy-falsify} and Definition \ref{defn:falsify}} \pflabel{satisfy-inr-falsify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-inr-falsify} and only one case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSInr})}]
            \begin{pfsteps*}
            \item $e = \hinr{\tau_1}{e_2}$ \BY{assumption}
            \item $\csatisfy{e_2}{\cfalsify{\xi_2}}$ \BY{assumption} \pflabel{[inr]satisfy-falsify2}
            \item $\csatisfy{e_2}{\xi_2}$ \BY{IH on \pfref{[inr]satisfy-falsify2}} \pflabel{[inr]satisfy2}
            \item $\csatisfy{e}{\cinr{\xi_2}}$ \BY{Rule (\ref{rule:CSInr}) on \pfref{[inr]satisfy2}}
            \end{pfsteps*} 
        \end{byCases}
      
      \restorelocalsteps{1}
      \item[\xi=\cpair{\xi_1}{\xi_2}]
        \begin{pfsteps*}
        \item $\csatisfy{e}{\cpair{\cfalsify{\xi_1}}{\cfalsify{\xi_2}}}$ \BY{\pfref{satisfy-falsify} and Definition \ref{defn:falsify}} \pflabel{satisfy-pair-falsify}
        \end{pfsteps*}
        By rule induction over Rules (\ref{rules:Satisfy}) on \pfref{satisfy-pair-falsify} and only case applies.
        \begin{byCases}
          \item[\text{(\ref{rule:CSPair})}]
            \begin{pfsteps*}
            \item $e=\hpair{e_1}{e_2}$ \BY{assumption}
            \item $\csatisfy{e_1}{\cfalsify{\xi_1}}$ \BY{assumption} \pflabel{[pair]satisfy-falsify1}
            \item $\csatisfy{e_2}{\cfalsify{\xi_2}}$ \BY{assumption} \pflabel{[pair]satisfy-falsify2}
            \item $\csatisfy{e_1}{\xi_1}$ \BY{IH on \pfref{[pair]satisfy-falsify1}} \pflabel{[pair]satisfy1}
            \item $\csatisfy{e_2}{\xi_2}$ \BY{IH on \pfref{[pair]satisfy-falsify2}} \pflabel{[pair]satisfy2}
            \item $\csatisfy{e}{\cpair{\xi_1}{\xi_2}}$ \BY{Rule (\ref{rule:CSPair}) on \pfref{[pair]satisfy1} and \pfref{[pair]satisfy2}}
            \end{pfsteps*}
        \end{byCases} 
    \end{byCases}
    \resetpfcounter
  \end{enumerate}
\end{proof}

\begin{lemma}
  Assume $\isVal{e}$ and $\ctruify{\xi}=\xi$. Then $\cnotsatisfy{e}{\xi}$ iff $\csatisfy{e}{\cdual{\xi}}$.
\end{lemma}

\begin{theorem}
\label{thrm:redundant-truify-falsify}
  $\csatisfy{\xi_r}{\xi_{rs}}$ iff $\csatisfy{\ctruth}{\cor{\cdual{\ctruify{\xi_r}}}{\cfalsify{\xi_{rs}}}}$.
\end{theorem}