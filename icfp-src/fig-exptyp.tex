% !TEX root= extended-abstract.tex

\begin{figure}[h]
\judgbox{\hexptyp{\Gamma}{\Delta}{e}{\tau}}
{$e$ is of type $\tau$}

\begin{mathpar}
\Infer{\TMatchZPre}{
  \hexptyp{\Gamma}{\Delta}{e}{\tau_1} \\
  \chrulstyp{\Gamma}{\Delta}{\cfalsity}{\hrules{r}{rs}}{\tau_1}{\xi}{\tau_2} \\
  \boxed{\csatisfyormay{\ctruth}{\xi}}
}{
  \hexptyp{\Gamma}{\Delta}{\hmatch{e}{\zruls{\cdot}{r}{rs}}}{\tau_2}
}

\Infer{\TMatchNZPre}{
  \hexptyp{\Gamma}{\Delta}{e}{\tau_1} \\
  \isFinal{e} \\
  \chrulstyp{\Gamma}{\Delta}{\cfalsity}{rs_{pre}}{\tau_1}{\xi_{pre}}{\tau_2} \\
  \chrulstyp{\Gamma}{\Delta}{\xi_{pre}}{\hrules{r}{rs_{post}}}{\tau_1}{\xi_{rest}}{\tau_2} \\
  \boxed{\cnotsatisfyormay{e}{\xi_{pre}}} \\
  \boxed{\csatisfyormay{\ctruth}{\cor{\xi_{pre}}{\xi_{rest}}}}
}{
\hexptyp{\Gamma}{\Delta}{\hmatch{e}{\zruls{rs_{pre}}{r}{rs_{post}}}}{\tau_2}
}
\end{mathpar}
\caption{Typing of Internal Expressions}
\label{fig:exptyp}
\end{figure}
